!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Abide",[],t):"object"==typeof exports?exports.Abide=t():e.Abide=t()}(this,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r.r(t);var o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$element=t,this.options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){n(e,t,r[t])})}return e}({},e.defaults,r),this.className="Abide",this.init()}var t,r,o;return t=e,o=[{key:"factory",value:function(t,r){return new e(t,r)}},{key:"requiredCheck",value:function(e){if(!e.required)return!0;var t=!0;switch(e.type){case"checkbox":t=e.checked;break;case"select":case"select-one":case"select-multiple":e[e.selectedIndex].length&&e[e.selectedIndex].value||(t=!1);break;default:e.value&&e.value.length||(t=!1)}return t}},{key:"siblings",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[],i=e.parentNode.firstChild;i;)1===i.nodeType&&i!==e&&r.push(i),i=i.nextSibling;if(""!==t){var n=[].slice.call(e.parentNode.querySelectorAll(t)),a=r.filter(function(e){return n.includes(e)});r=a}return r}},{key:"GetYoDigits",value:function(e,t){var r=e||6;return Math.round(Math.pow(36,r+1)-Math.random()*Math.pow(36,r+1)).toString(36).slice(1)+(t?"-".concat(t):"")}}],(r=[{key:"init",value:function(){var e=this,t=[].slice.call(this.$element.querySelectorAll('input:not([type="submit"])')),r=[].slice.call(this.$element.querySelectorAll("textarea,select"));this.$inputs=[].concat(i(t),i(r));var n=[].slice.call(this.$element.querySelectorAll("[data-abide-error]"));this.options.a11yAttributes&&(this.$inputs.forEach(function(t){return e.addA11yAttributes(t)}),n.forEach(function(t){return e.addGlobalErrorA11yAttributes(t)})),this.events()}},{key:"events",value:function(){var e=this;this.$element.addEventListener("reset",function(){e.resetForm()}),this.$element.addEventListener("submit",function(t){t.preventDefault(),e.validateForm()}),this.$element.addEventListener("formValid",function(){console.log("Form Valid")}),this.$element.addEventListener("formInvalid",function(){console.log("Form Invalid")}),"fieldChange"===this.options.validateOn&&this.$inputs.forEach(function(t){t.addEventListener("change",function(t){e.validateInput(t.currentTarget)})}),this.options.liveValidate&&this.$inputs.forEach(function(t){t.addEventListener("input",function(t){e.validateInput(t.currentTarget)})}),this.options.validateOnBlur&&this.$inputs.forEach(function(t){t.addEventListener("blur",function(t){e.validateInput(t.currentTarget)})})}},{key:"findFormError",value:function(t){var r=t.id,i=e.siblings(t,this.options.formErrorSelector);if(i.length||(i=[].slice.call(t.parentNode.querySelectorAll(this.options.formErrorSelector))),r){var n=this.$element.querySelector('[data-form-error-for="'.concat(r,'"]'));n&&i.push(n)}return i}},{key:"findLabel",value:function(e){var t=e.id,r=this.$element.querySelector('label[for="'.concat(t,'"]'));return r||e.closest("label")}},{key:"findRadioLabels",value:function(e){var t=this,r=e.map(function(e){var r=e.id,i=t.$element.querySelector('label[for="'.concat(r,'"]'));return i||(i=e.closest("label")),i});return[].slice.call(r)}},{key:"addErrorClasses",value:function(e){var t=this.findLabel(e),r=this.findFormError(e);t.length&&t.classList.add(this.options.labelErrorClass),r.length&&r.classList.add(this.options.formErrorClass),e.classList.add(this.options.inputErrorClass),e.setAttribute("data-invalid",""),e.setAttribute("aria-invalid",!0)}},{key:"addA11yAttributes",value:function(t){var r=this.findFormError(t),i=r.filter(function(e){return"label"===e.nodeName.toLowerCase()}),n=r[0];if(r.length){if(void 0===t.getAttribute("aria-describedby")){var a=n.getAttribute("id");void 0===a&&(a=e.GetYoDigits(6,"abide-error"),n.setAttribute("id",a)),t.setAttribute("aria-describedby",a)}if(i.filter("[for]").length<i.length){var o=t.getAttribute("id");void 0===o&&(o=e.GetYoDigits(6,"abide-input"),t.setAttribute("id",o)),i.forEach(function(e){void 0===e.getAttribute("for")&&e.setAttribute("for",o)})}r.forEach(function(e){void 0===e.getAttribute("role")&&e.setAttribute("role","alert")}).end()}}},{key:"addGlobalErrorA11yAttributes",value:function(e){void 0===e.getAttribute("aria-live")&&e.setAttribute("aria-live",this.options.a11yErrorLevel)}},{key:"removeRadioErrorClasses",value:function(e){var t=this,r=[].slice.call(this.$element.querySelectorAll('[type="radio"][name="'.concat(e,'"]')));this.findRadioLabels(r).forEach(function(e){e.classList.remove(t.options.labelErrorClass)}),r.forEach(function(e){var r=t.findFormError(e);r.length&&r.classList.remove(t.options.formErrorClass),e.classList.remove(t.options.inputErrorClass),e.removeAttribute("data-invalid"),e.removeAttribute("aria-invalid")})}},{key:"removeErrorClasses",value:function(e){if("radio"===e.type)return this.removeRadioErrorClasses(e.getAttribute("name"));var t=this.findLabel(e),r=this.findFormError(e);return t.length&&t.classList.remove(this.options.labelErrorClass),r.length&&r.classList.remove(this.options.formErrorClass),e.classList.remove(this.options.inputErrorClass),e.removeAttribute("data-invalid"),e.removeAttribute("aria-invalid"),!0}},{key:"validateInput",value:function(t){var r=this,i=e.requiredCheck(t),n=!1,a=!0,o=t.getAttribute("data-validator"),l=!0;if(t.hasAttribute("data-abide-ignore")||"hidden"===t.type||t.hasAttribute("disabled"))return!0;switch(t.type){case"radio":n=this.validateRadio(t.getAttribute("name"));break;case"checkbox":n=i;break;case"select":case"select-one":case"select-multiple":n=i;break;default:n=this.validateText(t)}o&&(a=this.matchValidation(t,o,t.getAttribute("required"))),t.getAttribute("data-equalto")&&(l=this.options.validators.equalTo(t));var s=-1===[i,n,a,l].indexOf(!1);"".concat(s?"valid":"invalid",".zf.abide");s&&this.$element.querySelectorAll('[data-equalto="'.concat(t.getAttribute("id"),'"]')).forEach(function(e){r.validateInput(e)});return this[s?"removeErrorClasses":"addErrorClasses"](t),s}},{key:"validateForm",value:function(){var e=this,t=[];this.$inputs.forEach(function(r){t.push(e.validateInput(r))});var r=-1===t.indexOf(!1);return this.$element.querySelectorAll("[data-abide-error]").forEach(function(t){e.options.a11yAttributes&&e.addGlobalErrorA11yAttributes(t),t.css("display",r?"none":"block")}),this.$element.dispatchEvent(new Event("".concat(r?"formValid":"formInvalid")),[this.$element]),r}},{key:"validateText",value:function(e,t){var r=t||e.getAttribute("pattern")||e.getAttribute("type"),i=e.value,n=!1;return i.length?n=Object.prototype.hasOwnProperty.call(this.options.patterns,r)?this.options.patterns[r].test(i):t===e.getAttribute("type")||new RegExp(t).test(i):e.getAttribute("required")||(n=!0),n}},{key:"validateRadio",value:function(e){var t=this.$element.querySelectorAll('[type="radio"][name="'.concat(e,'"]')),r=!1,i=!1;return t.forEach(function(e){e.getAttribute("required")&&(i=!0)}),i||(r=!0),r||t.forEach(function(e){e.checked&&(r=!0)}),r}},{key:"matchValidation",value:function(e,t,r){var i=this,n=!!r;return-1===t.split(" ").map(function(t){return i.options.validators[t](e,n,e.parentNode)}).indexOf(!1)}},{key:"resetForm",value:function(){var e=this;this.$element.querySelectorAll(".".concat(this.options.labelErrorClass,":not(small)")).forEach(function(t){t.classList.remove(e.options.labelErrorClass)}),this.$element.querySelectorAll(".".concat(this.options.inputErrorClass,":not(small)")).forEach(function(t){t.classList.remove(e.options.inputErrorClass)}),document.querySelectorAll("".concat(this.options.formErrorSelector,".").concat(this.options.formErrorClass)).forEach(function(t){t.classList.remove(e.options.formErrorClass)}),[].slice.call(this.$element.querySelectorAll("[data-abide-error]")).forEach(function(e){e.style.display="none"}),this.$element.querySelectorAll('input:not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="hidden"]):not([type="radio"]):not([type="checkbox"]):not([data-abide-ignore])').forEach(function(e){e.removeAttribute("data-invalid"),e.removeAttribute("aria-invalid"),e.setAttribute("value","")}),this.$element.querySelectorAll('[type="radio"]:not([data-abide-ignore]), [type="checkbox"]:not([data-abide-ignore])').forEach(function(e){e.removeAttribute("data-invalid"),e.removeAttribute("aria-invalid"),e.removeAttribute("checked")})}},{key:"destroy",value:function(){var e=this;[].slice.call(this.$element.querySelectorAll("[data-abide-error]")).forEach(function(e){e.style.display="none"}),this.$inputs.forEach(function(t){e.removeErrorClasses(t)})}}])&&a(t.prototype,r),o&&a(t,o),e}();o.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",a11yAttributes:!0,a11yErrorLevel:"assertive",liveValidate:!1,validateOnBlur:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\\.\\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(?:222[1-9]|2[3-6][0-9]{2}|27[0-1][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^((?:(https?|ftps?|file|ssh|sftp):\/\/|www\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\\[\]{};:\\'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\\-([0-1][0-9])\\-([0-3][0-9])T([0-5][0-9])\\:([0-5][0-9])\\:([0-5][0-9])(Z|([\\-\\+]([0-1][0-9])\\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\\\/\\-]\d{1,2}[\\\/\\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \\\/.](0[1-9]|[12][0-9]|3[01])[- \\\/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \\\/.](0[1-9]|1[012])[- \\\/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,website:{test:function(e){return o.defaults.patterns.domain.test(e)||o.defaults.patterns.url.test(e)}}},validators:{equalTo:function(e){return document.querySelector("#".concat(e.getAttribute("data-equalto"))).getAttribute("value")===e.getAttribute("value")}}},t.default=o}])});