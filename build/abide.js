!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Abide",[],e):"object"==typeof exports?exports.Abide=e():t.Abide=e()}(this,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.r(e);var o=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$element=e,this.options=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),i.forEach(function(e){a(t,e,r[e])})}return t}({},t.defaults,r),this.className="Abide",this.init()}var e,r,o;return e=t,o=[{key:"factory",value:function(e,r){return new t(e,r)}},{key:"requiredCheck",value:function(t){if(!t.required)return!0;var e=!0;switch(t.type){case"checkbox":e=t.checked;break;case"select":case"select-one":case"select-multiple":t[t.selectedIndex]&&t[t.selectedIndex].hasAttribute("value")||(e=!1);break;default:t.value&&t.value.length||(e=!1)}return e}},{key:"siblings",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[],i=t.parentNode.firstChild;i;)1===i.nodeType&&i!==t&&r.push(i),i=i.nextSibling;if(""!==e){var a=[].slice.call(t.parentNode.querySelectorAll(e)),n=r.filter(function(t){return a.includes(t)});r=n}return r}},{key:"GetYoDigits",value:function(t,e){var r=t||6;return Math.round(Math.pow(36,r+1)-Math.random()*Math.pow(36,r+1)).toString(36).slice(1)+(e?"-".concat(e):"")}}],(r=[{key:"init",value:function(){var t=this,e=[].slice.call(this.$element.querySelectorAll('input:not([type="submit"])')),r=[].slice.call(this.$element.querySelectorAll("textarea,select"));this.$inputs=[].concat(i(e),i(r));var a=[].slice.call(this.$element.querySelectorAll("[data-abide-error]"));this.options.a11yAttributes&&(this.$inputs.forEach(function(e){return t.addA11yAttributes(e)}),a.forEach(function(e){return t.addGlobalErrorA11yAttributes(e)})),this.events()}},{key:"events",value:function(){var t=this;this.$element.addEventListener("reset",function(){t.resetForm()}),this.$element.addEventListener("submit",function(e){t.validateForm()||e.preventDefault()}),"fieldChange"===this.options.validateOn&&this.$inputs.forEach(function(e){e.addEventListener("change",function(e){t.validateInput(e.currentTarget)})}),this.options.liveValidate&&this.$inputs.forEach(function(e){e.addEventListener("input",function(e){t.validateInput(e.currentTarget)})}),this.options.validateOnBlur&&this.$inputs.forEach(function(e){e.addEventListener("blur",function(e){t.validateInput(e.currentTarget)})})}},{key:"findFormError",value:function(e){var r=e.id,i=t.siblings(e,this.options.formErrorSelector);if(i.length||(i=[].slice.call(e.parentNode.querySelectorAll(this.options.formErrorSelector))),r){var a=this.$element.querySelector('[data-form-error-for="'.concat(r,'"]'));a&&i.push(a)}return i}},{key:"findLabel",value:function(t){var e=t.id,r=this.$element.querySelector('label[for="'.concat(e,'"]'));return r||t.closest("label")}},{key:"findRadioLabels",value:function(t){var e=this,r=t.map(function(t){var r=t.id,i=e.$element.querySelector('label[for="'.concat(r,'"]'));return i||(i=t.closest("label")),i});return[].slice.call(r)}},{key:"addErrorClasses",value:function(t){var e=this,r=this.findLabel(t),i=this.findFormError(t);r&&r.classList.add(this.options.labelErrorClass),i.length&&i.forEach(function(t){t.classList.add(e.options.formErrorClass)}),t.classList.add(this.options.inputErrorClass),t.setAttribute("data-invalid",""),t.setAttribute("aria-invalid",!0)}},{key:"addA11yAttributes",value:function(e){var r=this.findFormError(e),i=r.filter(function(t){return"label"===t.nodeName.toLowerCase()}),a=r[0];if(r.length){if(void 0===e.getAttribute("aria-describedby")){var n=a.getAttribute("id");void 0===n&&(n=t.GetYoDigits(6,"abide-error"),a.setAttribute("id",n)),e.setAttribute("aria-describedby",n)}if(i.filter("[for]").length<i.length){var o=e.getAttribute("id");void 0===o&&(o=t.GetYoDigits(6,"abide-input"),e.setAttribute("id",o)),i.forEach(function(t){void 0===t.getAttribute("for")&&t.setAttribute("for",o)})}r.forEach(function(t){void 0===t.getAttribute("role")&&t.setAttribute("role","alert")}).end()}}},{key:"addGlobalErrorA11yAttributes",value:function(t){void 0===t.getAttribute("aria-live")&&t.setAttribute("aria-live",this.options.a11yErrorLevel)}},{key:"removeRadioErrorClasses",value:function(t){var e=this,r=[].slice.call(this.$element.querySelectorAll('[type="radio"][name="'.concat(t,'"]')));this.findRadioLabels(r).forEach(function(t){t.classList.remove(e.options.labelErrorClass)}),r.forEach(function(t){var r=e.findFormError(t);r.length&&r.classList.remove(e.options.formErrorClass),t.classList.remove(e.options.inputErrorClass),t.removeAttribute("data-invalid"),t.removeAttribute("aria-invalid")})}},{key:"removeErrorClasses",value:function(t){if("radio"===t.type)return this.removeRadioErrorClasses(t.getAttribute("name"));var e=this.findLabel(t),r=this.findFormError(t);return e&&e.classList.remove(this.options.labelErrorClass),r.length&&r.classList.remove(this.options.formErrorClass),t.classList.remove(this.options.inputErrorClass),t.removeAttribute("data-invalid"),t.removeAttribute("aria-invalid"),!0}},{key:"validateInput",value:function(e){var r=this,i=t.requiredCheck(e),a=!1,n=!0,o=e.getAttribute("data-validator"),l=!0;if(e.hasAttribute("data-abide-ignore")||"hidden"===e.type||e.hasAttribute("disabled"))return!0;switch(e.type){case"radio":a=this.validateRadio(e.getAttribute("name"));break;case"checkbox":a=i;break;case"select":case"select-one":case"select-multiple":a=i;break;default:a=this.validateText(e)}o&&(n=this.matchValidation(e,o,e.getAttribute("required"))),e.getAttribute("data-equalto")&&(l=this.options.validators.equalTo(e));var s=-1===[i,a,n,l].indexOf(!1);s&&this.$element.querySelectorAll('[data-equalto="'.concat(e.getAttribute("id"),'"]')).forEach(function(t){r.validateInput(t)});return this[s?"removeErrorClasses":"addErrorClasses"](e),s}},{key:"validateForm",value:function(){var t=this,e=[];this.$inputs.forEach(function(r){e.push(t.validateInput(r))});var r=-1===e.indexOf(!1);return this.$element.querySelectorAll("[data-abide-error]").forEach(function(e){t.options.a11yAttributes&&t.addGlobalErrorA11yAttributes(e),e.css("display",r?"none":"block")}),this.$element.dispatchEvent(new Event("".concat(r?"formValid":"formInvalid"))),r}},{key:"validateText",value:function(t,e){var r=e||t.getAttribute("pattern")||t.getAttribute("type"),i=t.value,a=!1;return i.length?a=Object.prototype.hasOwnProperty.call(this.options.patterns,r)?this.options.patterns[r].test(i):e===t.getAttribute("type")||new RegExp(e).test(i):t.getAttribute("required")||(a=!0),a}},{key:"validateRadio",value:function(t){var e=this.$element.querySelectorAll('[type="radio"][name="'.concat(t,'"]')),r=!1,i=!1;return e.forEach(function(t){t.hasAttribute("required")&&(i=!0)}),i||(r=!0),r||e.forEach(function(t){t.checked&&(r=!0)}),r}},{key:"matchValidation",value:function(t,e,r){var i=this,a=!!r;return-1===e.split(" ").map(function(e){return i.options.validators[e](t,a,t.parentNode)}).indexOf(!1)}},{key:"resetForm",value:function(){var t=this;this.$element.querySelectorAll(".".concat(this.options.labelErrorClass,":not(small)")).forEach(function(e){e.classList.remove(t.options.labelErrorClass)}),this.$element.querySelectorAll(".".concat(this.options.inputErrorClass,":not(small)")).forEach(function(e){e.classList.remove(t.options.inputErrorClass)}),document.querySelectorAll("".concat(this.options.formErrorSelector,".").concat(this.options.formErrorClass)).forEach(function(e){e.classList.remove(t.options.formErrorClass)}),[].slice.call(this.$element.querySelectorAll("[data-abide-error]")).forEach(function(t){t.style.display="none"}),this.$element.querySelectorAll('input:not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="hidden"]):not([type="radio"]):not([type="checkbox"]):not([data-abide-ignore])').forEach(function(t){t.removeAttribute("data-invalid"),t.removeAttribute("aria-invalid"),t.setAttribute("value","")}),this.$element.querySelectorAll('[type="radio"]:not([data-abide-ignore]), [type="checkbox"]:not([data-abide-ignore])').forEach(function(t){t.removeAttribute("data-invalid"),t.removeAttribute("aria-invalid"),t.removeAttribute("checked")})}},{key:"destroy",value:function(){var t=this;[].slice.call(this.$element.querySelectorAll("[data-abide-error]")).forEach(function(t){t.style.display="none"}),this.$inputs.forEach(function(e){t.removeErrorClasses(e)})}}])&&n(e.prototype,r),o&&n(e,o),t}();o.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",a11yAttributes:!0,a11yErrorLevel:"assertive",liveValidate:!1,validateOnBlur:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\\.\\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(?:222[1-9]|2[3-6][0-9]{2}|27[0-1][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^((?:(https?|ftps?|file|ssh|sftp):\/\/|www\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\\[\]{};:\\'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\\-([0-1][0-9])\\-([0-3][0-9])T([0-5][0-9])\\:([0-5][0-9])\\:([0-5][0-9])(Z|([\\-\\+]([0-1][0-9])\\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\\/\\-]\d{1,2}[\\/\\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \\/.](0[1-9]|[12][0-9]|3[01])[- \\/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \\/.](0[1-9]|1[012])[- \\/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,website:{test:function(t){return o.defaults.patterns.domain.test(t)||o.defaults.patterns.url.test(t)}}},validators:{equalTo:function(t){return document.querySelector("#".concat(t.getAttribute("data-equalto"))).getAttribute("value")===t.getAttribute("value")}}},e.default=o}])});